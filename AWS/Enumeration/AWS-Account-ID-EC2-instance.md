# Enumerating AWS Account ID from an EC2 instance
### get-caller-identity
- By using `get-caller-identity`, the EC2 instance may have an instance profile setup
```
user@host:$ aws sts get-caller-identity
{
	"Account": "0000000000000", 
	"UserId": "ASONOIANFDNINFDINFA:i-000000000000", 
	"Arn": "arn:aws:sts::000000000000:assumed-role/AmazonLightsailInstanceRole/i-00000000"
}
```
### Metadata
- Additional information about the EC2 instance can be extracted using the metadata service
```
TOKEN=`curl -X PUT "http://IP/latest/api/token" -H "X-aws-ec2-metadata-token-ttl-seconds: 21600"`
curl -H "X-aws-ec2-metadata-token: $TOKEN" http://IP/latest/dynamic/instance-identity/document
```
- Sample output: 
```
{
   "accountId" : "000000000000",
   "architecture" : "x86_64",
   "availabilityZone" : "ap-southeast-2a",
   "billingProducts" : null,
   "devpayProductCodes" : null,
   "marketplaceProductCodes" : null,
   "imageId" : "ami-042c4533fa25c105a",
   "instanceId" : "i-00000000000000000",
   "instanceType" : "t2.nano",
   "kernelId" : null,
   "pendingTime" : "2022-02-27T22:34:30Z",
   "privateIp" : "172.26.6.225",
   "ramdiskId" : null,
   "region" : "ap-southeast-2",
   "version" : "2017-09-30"
}

```