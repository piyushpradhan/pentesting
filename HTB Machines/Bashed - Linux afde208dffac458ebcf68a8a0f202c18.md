# Bashed - Linux

## Enumeration

Scanning open ports

![Untitled](Bashed%20-%20Linux%20afde208dffac458ebcf68a8a0f202c18/Untitled.png)

This reveals the possibility that the exploit, phpbash is present on this server

![Untitled](Bashed%20-%20Linux%20afde208dffac458ebcf68a8a0f202c18/Untitled%201.png)

Running a directory scan 

![Untitled](Bashed%20-%20Linux%20afde208dffac458ebcf68a8a0f202c18/Untitled%202.png)

## Initial access

Found `phpbash.php` in /dev directory

which gave us a shell as user `www-data`

## Privilege escalation

![Untitled](Bashed%20-%20Linux%20afde208dffac458ebcf68a8a0f202c18/Untitled%203.png)

But couldn't run script manager due to the absence of tty shell 

so uploaded a reverse shell script to the server and gained a tty reverse shell 

![Untitled](Bashed%20-%20Linux%20afde208dffac458ebcf68a8a0f202c18/Untitled%204.png)

to run as another user without a password 

```bash
**#only possible if the system permits login without a password for that particular user**
sudo -i -u <username>
```

the only directory owned by scriptmanager is `scripts`

![Untitled](Bashed%20-%20Linux%20afde208dffac458ebcf68a8a0f202c18/Untitled%205.png)

the `test.txt` file is running as root

![Untitled](Bashed%20-%20Linux%20afde208dffac458ebcf68a8a0f202c18/Untitled%206.png)

writing a reverse shell script in python, and will try and run it as root

![Untitled](Bashed%20-%20Linux%20afde208dffac458ebcf68a8a0f202c18/Untitled%207.png)

wait for the cron job to complete 

**root shell obtained**