# Active Directory

## Physical Components of AD

### Domain Controller

It is a server with AD Domain Services server role installed that has specifically been promoted to a domain controller

1. Hosts a copy of the AD DS (domain services) directory store
2. Provides authentication and authorization services
3. Replicates updates to other domain controllers in the domain and forest
4. Allows administrative access to manage user accoutns and network resources

### Data Store

It contains the database files and processes that store and manage directory information for users, services and applications.

1. Consists of the Ntds.dit file
2. is stored by default in the `%systemRoot%/NTDS` folder on all domain controllers
3. Is accessible only through domain controller processes and protocols

## Logical Components

### AD DS Schema

- Defines every type of object that can be stored in the directory
- Enforces rules regarding object creation and configuraion

![Active%20Directory/Untitled.png](Active%20Directory/Untitled.png)

### Domains

Are used to group and manage objects in an organization

1. administrative boundary for applying policies to groups of objects
2. a replication boundary for replication data between domain controllers
3. an authentication and authorization boundary that provides a way to limit the scope of access to resources

### Trees

Group of domains, in a hierarchial structure

1. Share a contiguous namespace with the parent domain

   Ex: [contoso.com](http://contoso.com) → [emea.contoso.com](http://emea.contoso.com) → na.contoso.com

2. Can have additional child domains
3. By default create a two-way transitive trust with other domains

### Forest

Collection of trees

1. Share a common schema
2. Share a common configuration partition
3. Share a common global catalog to enable searching
4. Enable trusts between all domains in the forest
5. Share the Enterprise Admins and Schema Admins groups

### OUs (Organizational Units)

Container for users, computers, groups etc.

1. Represent your organization hierarchially and logically
2. Manage a collection of objects in a consistent way
3. Delegate permissions to administer to groups
4. Apply policies

### Trust

Provides a mechanism for users to gain access to resources in another domain

### Objects

Remain inside of OUs

# Default Security Groups -

There are a lot of default security groups so I won't be going into too much detail of each past a brief description of the permissions that they offer to the assigned group. Here is a brief outline of the security groups:

- Domain Controllers - All domain controllers in the domain
- Domain Guests - All domain guests
- Domain Users - All domain users
- Domain Computers - All workstations and servers joined to the domain
- Domain Admins - Designated administrators of the domain
- Enterprise Admins - Designated administrators of the enterprise
- Schema Admins - Designated administrators of the schema
- DNS Admins - DNS Administrators Group
- DNS Update Proxy - DNS clients who are permitted to perform dynamic updates on behalf of some other clients (such as DHCP servers).
- Allowed RODC Password Replication Group - Members in this group can have their passwords replicated to all read-only domain controllers in the domain
- Group Policy Creator Owners - Members in this group can modify group policy for the domain
- Denied RODC Password Replication Group - Members in this group cannot have their passwords replicated to any read-only domain controllers in the domain
- Protected Users - Members of this group are afforded additional protections against authentication security threats. See http://go.microsoft.com/fwlink/?LinkId=298939 for more information.
- Cert Publishers - Members of this group are permitted to publish certificates to the directory
- Read-Only Domain Controllers - Members of this group are Read-Only Domain Controllers in the domain
- Enterprise Read-Only Domain Controllers - Members of this group are Read-Only Domain Controllers in the enterprise
- Key Admins - Members of this group can perform administrative actions on key objects within the domain.
- Enterprise Key Admins - Members of this group can perform administrative actions on key objects within the forest.
- Cloneable Domain Controllers - Members of this group that are domain controllers may be cloned.
- RAS and IAS Servers - Servers in this group can access remote access properties of users

## Attacking Kerberos

[Attacking Kerberos](Active%20Directory/Attacking-Kerberos.md)

## Enumeration with Kerbrute

[Enumeration with Kerbrute](Active%20Directory/Enumeration.md)

## Harvesting and Brute Forcing

[Harvesting and Brute Forcing](Active%20Directory/Harvesting-BruteForcing.md)

## Kerberoasting

[Kerberoasting with Rubeus and Impacket](Active%20Directory/Kerberoasting.md)

## AS-REP Roasting

[AS-REP Roasting with Rubeus](Active%20Directory/AS-REP-Roasting.md)

## Mimikatz

[Using mimikatz to create and pass tickets, dump hashes and allow backdoor access](Active%20Directory/Pass-the-ticket-Mimikatz.md)

## Attacktive Directory

[Attacktive Directory](Active%20Directory/Attacktive-Directory.md)
